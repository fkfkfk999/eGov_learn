<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Board">
	
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="boardSerarchVO" type="eGov.home.board.domain.BoardDefaultVO"/>
	
	<resultMap id="board" class="eGov.home.board.domain.BoardVO">
		<result property="seqno" column="seqno" columnIndex="1"/>
		<result property="title" column="title" columnIndex="2"/>
		<result property="subtitle" column="subtitle" columnIndex="3"/>
		<result property="content" column="content" columnIndex="4"/>
		<result property="writer" column="writer" columnIndex="5"/>
	</resultMap>
	
	<insert id="boardDAO.insertBoard_S">
		<![CDATA[
			INSERT INTO board 
				( seqno
				  , title
				  , subtitle
				  , content
				  , writer )
			VALUES ( #seqno#
				  , #title#
				  , #subtitle#
				  , #content#
				  , #writer# )
		]]>
	</insert>
	
	<update id="boardDAO.updateBoard_S">
		<![CDATA[
			UPDATE board
			SET seqno=#seqno#
				, title=#title#
				, subtitle=#subtitle#
				, content=#content#
				, writer=#writer#
			]]>
	</update>
	
	<delete id="boardDAO.deleteBoard_S">
		<![CDATA[
			DELETE FROM board 
			]]>
	</delete>
	
	<select id="boardDAO.selectBoard_S" resultMap="board">
		<![CDATA[
			SELECT
				seqno
				, title
				, subtitle
				, content
				, writer
			FROM board
			]]>
	</select>
	
	<select id="boardDAO.selectBoardList_D" parameterClass="boardSerarchVO" resultClass="egovMap">
			SELECT
								seqno
								, title
								, subtitle
								, content
								, writer
					FROM board
			WHERE 1=1
			<isEqual prepend="AND" property="searchCondition" compareValue="0">
				seqno = #searchKeyword#
			</isEqual>
			<isEqual prepend="AND" property="searchCondition" compareValue="1">
				title LIKE CONCAT('%',#searchKeyword#,'%')
			</isEqual>
				ORDER BY 
				limit #firstIndex#, #recordCountPerPage#	
	</select>	
	<select id="boardDAO.selectBoardListTotCnt_S" parameterClass="boardSerarchVO" resultClass="int">
			SELECT COUNT(*) totcnt
			FROM board
			WHERE 1=1
			<isEqual prepend="AND" property="searchCondition" compareValue="0">
				seqno = #searchKeyword#
			</isEqual>
			<isEqual prepend="AND" property="searchCondition" compareValue="1">
				title LIKE CONCAT('%',#searchKeyword#,'%')
			</isEqual>
	</select>

</sqlMap>
